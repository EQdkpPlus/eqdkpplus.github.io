<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Plus Debug Logger - EQdkp Plus</title>
<script>document.documentElement.className="client-js";RLCONF={"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Plus_Debug_Logger","wgTitle":"Plus Debug Logger","wgCurRevisionId":1340,"wgRevisionId":1340,"wgArticleId":115,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with syntax highlighting errors","Coding"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Plus_Debug_Logger","wgRelevantArticleId":115,"wgRequestId":"YESmpxzjwhzSpLTStGT21gAAAME","wgCSPNonce":!1,"wgIsProbablyEditable":!1,
"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgULSCurrentAutonym":"English"};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.toc.styles":"ready","ext.uls.pt":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","ext.FontAwesome","ext.uls.interface","skins.vector.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.tokens@tffin",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="../w/load.php@lang=en&amp;modules=ext.pygments%257Cext.uls.pt%257Cmediawiki.legacy.commonPrint,shared%257Cmediawiki.skinning.interface%257Cmediawiki.toc.styles%257Cskins.vector.styles&amp;only=styles&amp;skin=vector.css"/>
<script async="" src="../w/load.php@lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../w/load.php@lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector.css"/>
<meta name="generator" content="MediaWiki 1.34.4"/>
<link rel="shortcut icon" href="../favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="EQdkp Plus (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../w/api.php@action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="EQdkp Plus Atom feed" href="../w/index.php@title=Special%253ARecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/w/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Plus_Debug_Logger rootpage-Plus_Debug_Logger skin-vector action-view">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Plus Debug Logger</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From EQdkp Plus</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="Plus_Debug_Logger.html#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="Plus_Debug_Logger.html#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Plus_Debug_Logger.html#General_description"><span class="tocnumber">1</span> <span class="toctext">General description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Plus_Debug_Logger.html#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Plus_Debug_Logger.html#Register_a_new_type"><span class="tocnumber">2.1</span> <span class="toctext">Register a new type</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Plus_Debug_Logger.html#Log_something"><span class="tocnumber">2.2</span> <span class="toctext">Log something</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Plus_Debug_Logger.html#Writing_your_own_output_format_functions"><span class="tocnumber">2.3</span> <span class="toctext">Writing your own output format functions</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Plus_Debug_Logger.html#Quick_Debug"><span class="tocnumber">2.4</span> <span class="toctext">Quick Debug</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Plus_Debug_Logger.html#Set_Deprecated_Methods"><span class="tocnumber">2.5</span> <span class="toctext">Set Deprecated Methods</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="General_description">General description</span></h1>
<p>The Plus Debug Logger (PDL) is the central point for debug messages in 1.0 instead of the local solutions used by various developers in the current system. It performs the task of an error handler for php errors as well.
</p>
<h1><span class="mw-headline" id="Usage">Usage</span></h1>
<p>The PDL is initialised early in the common.php and can be globally reached by using the $pdl object. Every debug message is associated to a type. Predefined types are "unknown", "php_error", "sql_error", "sql_query", "pdc_query" and "pdh_error" but of course you can (and should if you want to log custom errors) also register your own types.
</p>
<h2><span class="mw-headline" id="Register_a_new_type">Register a new type</span></h2>
<p>Example call:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>$this-&gt;pdl-&gt;register_type("sql_error", null, array($this, 'psl_html_format_sql_error'), array(2,3), true);</pre></div>
<p>The register_type function takes 4 parameters:
</p>
<ul><li>The name of the debug type you want to register, this must be unique</li>
<li>optional: plaintext output format function, used for file logging (an error should be in one line, timestamp and newline will be automatically added)</li>
<li>optional: html output format function, used to format the error on the bottom of the page</li>
<li>optional: debug level array (if your eqdkp system runs in one of the specified debug levels those errors will be shown on the bottom of the page)</li>
<li>optional: log to file, defaults to false.</li></ul>
<p><b>Note:</b> The html function is a method of the current object in this case, it could also be the name of a globally known function!
</p>
<h2><span class="mw-headline" id="Log_something">Log something</span></h2>
<p>If you want to log something you just call the log method like this:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>$this-&gt;pdl-&gt;log("sql_error", $sql, $error['message'], $error['code'], $dbname, $table_prefix);</pre></div>
<p>The first parameter always has to be the log type, followed by an arbitrary number of other parameters, which will be stored and can be used in the output format functions.
</p>
<h2><span class="mw-headline" id="Writing_your_own_output_format_functions">Writing your own output format functions</span></h2>
<p>An html output format function might look like this example:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>function pdl_html_format_sql_error($log_entry){
  $text =  '&lt;b&gt;Query:&lt;/b&gt;' . $log_entry['args'][0] . '&lt;br /&gt;&lt;br /&gt;
            &lt;b&gt;Message:&lt;/b&gt;' . $log_entry['args'][1] . '&lt;br /&gt;&lt;br /&gt;
            &lt;b&gt;Code:&lt;/b&gt;' . $log_entry['args'][2] . '&lt;br /&gt;
            &lt;b&gt;Database:&lt;/b&gt;' . $log_entry['args'][3] . '&lt;br /&gt;
            &lt;b&gt;Table Prefix:&lt;/b&gt;' . $log_entry['args'][4] . '&lt;br /&gt;';
  return $text;
}</pre></div>
<p>Whereas the passed $log_entry variable looks like this:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>$log_entry['timestamp'] = TIMESTAMP;
$log_entry['args'] = array();</pre></div>
<p>It contains an auto generated timestamp and an array containing the parameters passed to the log call.
</p>
<h2><span class="mw-headline" id="Quick_Debug">Quick Debug</span></h2>
<p>For Quick Debug a Variable, use the Debug function. If $variable is "<i>backtrace</i>", the output of <i>debug_backtrace()</i> will be shown.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre> $this-&gt;pdl-&gt;debug($variable='backtrace', $die=false)</pre></div>
<h2><span class="mw-headline" id="Set_Deprecated_Methods">Set Deprecated Methods</span></h2>
<p>Call the deprecated method and pass the name of the function you want to set deprecated.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>$this-&gt;pdl-&gt;deprecated($name);</pre></div>
<!-- 
NewPP limit report
Cached time: 20210307101048
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.031 seconds
Real time usage: 0.103 seconds
Preprocessor visited node count: 49/1000000
Preprocessor generated node count: 0/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1491/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key eqdkp2_wiki:pcache:idhash:115-0!canonical and timestamp 20210307101047 and revision id 1340
 -->
</div></div>
		
		<div class="printfooter">Retrieved from "<a dir="ltr" href="../w/index.php@title=Plus_Debug_Logger&amp;oldid=1340.html">https://wiki.eqdkp-plus.eu/w/index.php?title=Plus_Debug_Logger&amp;oldid=1340</a>"</div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special%253ACategories.html" title="Special:Categories">Categories</a>: <ul><li><a href="../w/index.php@title=Category%253APages_with_syntax_highlighting_errors&amp;action=edit&amp;redlink=1.html" class="new" title="Category:Pages with syntax highlighting errors (page does not exist)">Pages with syntax highlighting errors</a></li><li><a href="Category%253ACoding.html" title="Category:Coding">Coding</a></li></ul></div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-uls" class="active"><a href="Plus_Debug_Logger.html#" class="uls-trigger">English</a></li><li id="pt-login"><a href="../w/index.php@title=Special%253AUserLogin&amp;returnto=Plus+Debug+Logger.html" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Plus_Debug_Logger.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://wiki.eqdkp-plus.eu/w/index.php?title=Talk:Plus_Debug_Logger&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<ul class="menu">
													</ul>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Plus_Debug_Logger.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="../w/index.php@title=Plus_Debug_Logger&amp;action=edit.html" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="../w/index.php@title=Plus_Debug_Logger&amp;action=history.html" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<ul class="menu">
													</ul>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://wiki.eqdkp-plus.eu/w/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search EQdkp Plus" title="Search EQdkp Plus [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html" title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-EQdkp_Plus" aria-labelledby="p-EQdkp_Plus-label">
			<h3 id="p-EQdkp_Plus-label">EQdkp Plus</h3>
			<div class="body">
								<ul>
					<li id="n-Home"><a href="https://eqdkp-plus.eu" rel="nofollow">Home</a></li><li id="n-Forum"><a href="https://forum.eqdkp-plus.eu/" rel="nofollow">Forum</a></li><li id="n-Bugtracker"><a href="https://forum.eqdkp-plus.eu/bugtracker" rel="nofollow">Bugtracker</a></li><li id="n-Downloads"><a href="https://repo.eqdkp-plus.eu/" rel="nofollow">Downloads</a></li><li id="n-Project-Search"><a href="https://forum.eqdkp-plus.eu/wcf/project-search" rel="nofollow">Project-Search</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-Wiki" aria-labelledby="p-Wiki-label">
			<h3 id="p-Wiki-label">Wiki</h3>
			<div class="body">
								<ul>
					<li id="n-Main"><a href="Main_Page.html">Main</a></li><li id="n-Installation"><a href="Category%253AInstallation.html">Installation</a></li><li id="n-Usage"><a href="Category%253AUsage.html">Usage</a></li><li id="n-Extensions"><a href="Category%253AExtensions.html">Extensions</a></li><li id="n-Development"><a href="Category%253ADevelopment.html">Development</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-Misc" aria-labelledby="p-Misc-label">
			<h3 id="p-Misc-label">Misc</h3>
			<div class="body">
								<ul>
					<li id="n-recentchanges"><a href="https://wiki.eqdkp-plus.eu/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Tools</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special%253AWhatLinksHere/Plus_Debug_Logger.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="https://wiki.eqdkp-plus.eu/wiki/Special:RecentChangesLinked/Plus_Debug_Logger" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special%253ASpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="../w/index.php@title=Plus_Debug_Logger&amp;printable=yes.html" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="../w/index.php@title=Plus_Debug_Logger&amp;oldid=1340.html" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="../w/index.php@title=Plus_Debug_Logger&amp;action=info.html" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 29 September 2016, at 19:29.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons „Namensnennung, nicht kommerziell, Weitergabe unter gleichen Bedingungen“</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Projekt%253APrivacy_policy.html" title="Projekt:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="https://wiki.eqdkp-plus.eu/wiki/Projekt:About" title="Projekt:About">About EQdkp Plus</a></li>
								<li id="footer-places-disclaimer"><a href="https://wiki.eqdkp-plus.eu/wiki/Projekt:General_disclaimer" title="Projekt:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../w/resources/assets/licenses/cc-by-nc-sa.png" alt="Creative Commons „Namensnennung, nicht kommerziell, Weitergabe unter gleichen Bedingungen“" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../w/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="../w/resources/assets/poweredby_mediawiki_132x47.png 1.5x, ../w/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.031","walltime":"0.103","ppvisitednodes":{"value":49,"limit":1000000},"ppgeneratednodes":{"value":0,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":1491,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20210307101048","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":196});});</script>
</body>
<!-- Cached 20210307101048 -->
</html>
